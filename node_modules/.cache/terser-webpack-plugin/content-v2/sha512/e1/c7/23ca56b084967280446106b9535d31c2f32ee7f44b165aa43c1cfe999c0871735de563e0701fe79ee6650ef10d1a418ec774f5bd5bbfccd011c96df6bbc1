{"code":"!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,\"a\",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p=\"\",s(s.s=0)}([function(t,e,s){\"use strict\";let n;s.r(e);const i=indexedDB.open(\"FavoriteCocktails\",1);i.onsuccess=function(t){n=t.target.result},i.onupgradeneeded=function(t){n=t.target.result;n.createObjectStore(\"cocktails\",{keyPath:\"id\"}).transaction.oncomplete=function(){n.transaction(\"cocktails\",\"readwrite\").objectStore(\"cocktails\")}},i.onerror=function(){console.log(\"ERROR\")};class a{saveToLs(t){const e=this.getCoctailsFromLS();if(e.push(t),localStorage.setItem(\"cocktails\",JSON.stringify(e)),sessionStorage.setItem(\"cocktails\",JSON.stringify(e)),document.cookie=`cocktails=${JSON.stringify(e)}; max-age=10`,!n)return;n.transaction(\"cocktails\",\"readwrite\").objectStore(\"cocktails\").add(t)}getCoctailsFromLS(){return null===localStorage.getItem(\"cocktails\")?this.cocktails=[]:this.cocktails=JSON.parse(localStorage.getItem(\"cocktails\")),this.cocktails}removeFromLS(t){const e=this.getCoctailsFromLS();for(let s=0;s<e.length;s++)e[s].id===t&&e.splice(s,1);localStorage.setItem(\"cocktails\",JSON.stringify(e)),sessionStorage.setItem(\"cocktails\",JSON.stringify(e))}}const o=new a;const r=new class{displayTemplate(t){document.querySelector(\".results-wrapper\").style.display=\"block\";const e=document.querySelector(\"#results\");t.forEach(t=>{e.innerHTML+=`\\n            <div class=\"col-md-6 mt-5\">\\n                <div class=\"card\">\\n                    <button type=\"button\" data-id=\"${t.idDrink}\" class=\"favorite-btn btn btn-outline-info\">\\n                    +\\n                    </button>\\n                    <img class=\"card-img-top\" src=\"${t.strDrinkThumb}\" alt=\"${t.strDrink}\" width=200>\\n                    \\n                    <div class=\"card-body\">\\n                        <div class=\"card-text\">\\n                            <h4 class=\"card-title text-center\">${t.strDrink}</h4>\\n                            <h6 class=\"font-weight-bold\">Instructions:</h6>\\n                            <p>${t.strInstructions}</p>\\n                        </div>\\n                        <div class=\"card-text\">\\n                            <ul class=\"list-group\">\\n                                <li class=\"list-group-item alert alert-danger\">Ingredients</li> \\n                                ${this.displayIngredientAndMeasureTemplate(t)}\\n                            </ul>\\n                        </div>\\n                        <div class=\"card-text\">\\n                            <h6 class=\"font-weight-bold mt-2\">Extra information:</h6>\\n                            <span class=\"badge badge-pill badge-success\">${t.strAlcoholic}</span>\\n                            <span class=\"badge badge-pill badge-danger\">${t.strCategory}</span>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>`,this.isFavorite(t.idDrink)})}displayTemplateIng(t){document.querySelector(\".results-wrapper\").style.display=\"block\";const e=document.querySelector(\"#results\");t.forEach(t=>{e.innerHTML+=` \\n                <div class=\"col-md-4\">\\n                    <div class=\"card my-3\">\\n                        <button type=\"button\" data-id=\"${t.idDrink}\" class=\"favorite-btn btn btn-outline-info\">\\n                        +\\n                        </button>\\n                        <img class=\"card-img-top\" src=\"${t.strDrinkThumb}\">\\n                        <div class=\"card-body\">\\n                            <div class=\"card-text text-center\">\\n                            <h4 class=\"card-title text-center\">${t.strDrink}</h4>\\n                            <a data-target=\"#recipe\" href=\"#\" data-toggle=\"modal\" data-id=\"${t.idDrink}\" class=\"btn btn-success btn-recipe\">Get Details</a>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>`}),this.isFavorite()}displayIngredientAndMeasureTemplate(t){this.objectsArray=[];for(let e=1;e<=15;e++){const s={};null!==t[\"strIngredient\"+e]&&(s.ingredient=t[\"strIngredient\"+e],s.measure=t[\"strMeasure\"+e],this.objectsArray.push(s))}let e=\"\";return this.objectsArray.forEach(t=>{e+=`\\n                <li class=\"list-group-item\">${t.ingredient}:${t.measure}</li>\\n            `}),e}printMessage(t,e){this.parentElement=document.querySelector(\".jumbotron\");const s=document.querySelector(\".jumbotron h1\"),n=document.createElement(\"div\");n.innerHTML=`\\n            <div class='alert alert-${e} alert-dismissable'>\\n                <button class='close' data-dismiss='alert'>X</button>\\n                ${t}\\n            </div>\\n        `,this.parentElement.insertBefore(n,s),setTimeout(()=>{n.remove()},3e3)}clearPrevious(){for(this.resultDiv=document.getElementById(\"results\");this.resultDiv.hasChildNodes();)this.resultDiv.removeChild(this.resultDiv.firstChild)}displayModalDetails(t){const e=document.querySelector(\".modal-title\"),s=document.querySelector(\".modal-body .description-text\"),n=document.querySelector(\".modal-body .ingredient-list .list-group\");e.innerHTML=t.strDrink,s.innerHTML=t.strInstructions,n.innerHTML=this.displayIngredientAndMeasureTemplate(t)}displayCategories(t){this.categorySelect=document.querySelector(\".search-category\");let e=\"<option>-SELECT-</option>\";t.forEach(t=>{t.strCategory=t.strCategory.split(\" \").join(\"_\"),e+=`\\n                    <option value=\"${t.strCategory}\">${t.strCategory}</option>`}),this.categorySelect.innerHTML=e}isFavorite(){this.coctails=o.getCoctailsFromLS(),this.coctails.forEach(t=>{const e=document.querySelector(`[data-id=\"${t.id}\"]`);null!==e&&(e.classList.add(\".is-favorite\"),e.textContent=\"-\")})}displayFavorites(t){this.favoritesElement=document.querySelector(\"#favorites > tbody\");let e=\"\";t.forEach(t=>{e+=`\\n            <tr>\\n                <td>\\n                    <img src=\"${t.image}\" width=100 alt=\"${t.strDrink}\">\\n                </td>\\n                <td>${t.name}</td>\\n                <td>\\n                    <a href=\"#\" data-toggle=\"modal\" data-target=\"#recipe\" data-id=\"${t.id}\" class=\"btn btn-success btn-recipe\">\\n                    Get Details\\n                    </a>\\n                </td>\\n                <td>\\n                    <a href=\"#\" class=\"btn btn-danger btn-remove\" data-id=\"${t.id}\">Remove\\n                    </a>\\n                </td>\\n            </tr>\\n          `}),this.favoritesElement.innerHTML=e}removeDOMelement(t){t.remove()}},c=new class{async searchCocktailByName(t){return this.apiResponse=await fetch(\"https://www.thecocktaildb.com/api/json/v1/1/search.php?s=\"+t),this.jsonResponse=await this.apiResponse.json(),this.jsonResponse}async getCocktailsByIngredient(t){return this.apiResponse=await fetch(\"https://www.thecocktaildb.com/api/json/v1/1/filter.php?i=\"+t),this.jsonResponse=await this.apiResponse.json(),this.jsonResponse}async getCocktailDetailsById(t){return this.apiResponse=await fetch(\"https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=\"+t),this.jsonResponse=await this.apiResponse.json(),this.jsonResponse}async getCocktailCategories(){return this.apiResponse=await fetch(\"https://www.thecocktaildb.com/api/json/v1/1/list.php?c=list\"),this.jsonResponse=await this.apiResponse.json(),this.jsonResponse}async getCocktailsByCategory(t){return this.apiResponse=await fetch(\"https://www.thecocktaildb.com/api/json/v1/1/filter.php?c=\"+t),this.jsonResponse=await this.apiResponse.json(),this.jsonResponse}async getCocktailsByAlcoholic(t){return this.apiResponse=await fetch(\"https://www.thecocktaildb.com/api/json/v1/1/filter.php?a=\"+t),this.jsonResponse=await this.apiResponse.json(),this.jsonResponse}},l=new a;function d(){const t=document.querySelector(\"#search\").value;if(\"\"===t)r.printMessage(\"Please enter some text\",\"danger\");else{r.clearPrevious();const e=document.querySelector(\"#type\").value;let s;switch(e){case\"name\":s=c.searchCocktailByName(t);break;case\"ingredient\":s=c.getCocktailsByIngredient(t);break;case\"category\":s=c.getCocktailsByCategory(t);break;case\"alcohol\":s=c.getCocktailsByAlcoholic(t)}s.then(t=>{null===t.drinks?r.printMessage(\"There 's no such cocktails\",\"danger\"):\"name\"===e?r.displayTemplate(t.drinks):r.displayTemplateIng(t.drinks)}).catch(t=>{console.log(\"Network error..\",t)})}}function u(t){if(t.preventDefault(),t.target.classList.contains(\"btn-recipe\")&&c.getCocktailDetailsById(t.target.dataset.id).then(t=>{r.displayModalDetails(t.drinks[0])}),t.target.classList.contains(\"favorite-btn\"))if(t.target.classList.contains(\"is-favorite\"))t.target.classList.remove(\"is-favorite\"),t.target.textContent=\"+\",l.removeFromLS(t.target.dataset.id);else{t.target.classList.add(\"is-favorite\"),t.target.textContent=\"-\";const e=t.target.parentElement,s={id:t.target.dataset.id,image:e.querySelector(\".card-img-top\").src,name:e.querySelector(\".card-title\").textContent};l.saveToLs(s)}}function p(){r.isFavorite();document.querySelector(\".search-category\")&&c.getCocktailCategories().then(t=>{r.displayCategories(t.drinks)}).catch(t=>{console.log(\"Network error\",t)});const t=document.querySelector(\"#favorites\");if(t){const e=l.getCoctailsFromLS();r.displayFavorites(e),t.addEventListener(\"click\",t=>{t.target.classList.contains(\"btn-recipe\")&&c.getCocktailDetailsById(t.target.dataset.id).then(t=>{r.displayModalDetails(t.drinks[0])}),t.target.classList.contains(\"btn-remove\")&&(r.removeDOMelement(t.target.parentElement.parentElement),l.removeFromLS(t.target.dataset.id))})}}!function(){document.addEventListener(\"DOMContentLoaded\",p);const t=document.querySelector(\"#search-form\");t&&t.addEventListener(\"submit\",d);const e=document.querySelector(\"#results\");e&&e.addEventListener(\"click\",u)}()}]);","extractedComments":[]}